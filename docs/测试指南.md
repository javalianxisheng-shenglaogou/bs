# 多站点CMS系统测试指南

## 测试环境

- **后端**: http://localhost:8080/api
- **前端**: http://localhost:3000
- **数据库**: MySQL 8.0 (multi_site_cms)

## 测试账号

### 管理员账号
- **用户名**: admin
- **密码**: admin123
- **权限**: 所有权限

## 功能测试清单

### 1. 登录功能

#### 测试步骤:
1. 访问 http://localhost:3000/login
2. 输入用户名: admin
3. 输入密码: admin123
4. 点击"登录"按钮

#### 预期结果:
- ✅ 登录成功,跳转到仪表盘页面
- ✅ 右上角显示用户信息
- ✅ Token保存到localStorage

### 2. 仪表盘

#### 测试步骤:
1. 登录后自动进入仪表盘
2. 查看统计数据
3. 测试快捷操作按钮

#### 预期结果:
- ✅ 显示系统统计信息
- ✅ 快捷操作按钮可点击
- ✅ 点击"创建内容"跳转到内容管理
- ✅ 点击"创建站点"跳转到站点管理

### 3. 站点管理

#### 3.1 查看站点列表

**测试步骤**:
1. 点击左侧菜单"站点管理"
2. 查看站点卡片列表

**预期结果**:
- ✅ 显示8个站点卡片
- ✅ 每个卡片显示:
  - 站点名称
  - 站点状态(运行中/已停用)
  - 站点代码
  - 域名(可点击)
  - 描述
  - 语言/时区
  - 默认站点标识(如果是默认站点)
  - 创建时间
  - 操作按钮(编辑、配置、删除)

#### 3.2 新增站点

**测试步骤**:
1. 点击"新增站点"按钮
2. 填写表单:
   - 站点名称: 测试站点2
   - 站点代码: test2
   - 站点域名: test2.example.com
   - 站点描述: 这是一个测试站点
   - 默认语言: 简体中文
   - 时区: Asia/Shanghai
   - 站点状态: 运行中
3. 点击"确定"

**预期结果**:
- ✅ 表单验证通过
- ✅ 创建成功提示
- ✅ 对话框关闭
- ✅ 站点列表刷新,显示新站点

#### 3.3 编辑站点

**测试步骤**:
1. 在站点卡片上点击"编辑"按钮
2. 修改站点信息:
   - 修改站点描述
   - 修改SEO信息
   - 修改联系信息
3. 点击"确定"

**预期结果**:
- ✅ 表单预填充原有数据
- ✅ 站点代码字段禁用(不可修改)
- ✅ 更新成功提示
- ✅ 站点列表刷新,显示更新后的信息

#### 3.4 配置站点

**测试步骤**:
1. 在站点卡片上点击"配置"按钮
2. 切换到"基本配置"标签
3. 上传Logo图片
4. 上传Favicon图片
5. 点击"保存配置"

**预期结果**:
- ✅ 配置对话框打开
- ✅ 显示3个标签页(基本配置、主题配置、高级配置)
- ✅ Logo上传成功
- ✅ Favicon上传成功
- ✅ 配置保存成功
- ✅ 站点卡片显示Logo

#### 3.5 删除站点

**测试步骤**:
1. 在站点卡片上点击"删除"按钮
2. 在确认对话框中点击"确定"

**预期结果**:
- ✅ 显示确认对话框
- ✅ 删除成功提示
- ✅ 站点列表刷新,该站点不再显示

### 4. 内容管理

#### 4.1 查看内容列表

**测试步骤**:
1. 点击左侧菜单"内容管理"
2. 选择站点
3. 查看内容列表

**预期结果**:
- ✅ 显示内容列表
- ✅ 可以按站点筛选
- ✅ 可以按状态筛选
- ✅ 显示分页

#### 4.2 新增内容

**测试步骤**:
1. 点击"新增内容"按钮
2. 填写表单:
   - 选择站点
   - 输入标题
   - 输入摘要
   - 使用富文本编辑器编辑内容
   - 上传封面图片
   - 选择分类
   - 选择状态
3. 点击"确定"

**预期结果**:
- ✅ 表单验证通过
- ✅ 富文本编辑器正常工作
- ✅ 可以插入图片
- ✅ 封面图片上传成功
- ✅ 创建成功提示
- ✅ 内容列表刷新

#### 4.3 编辑内容

**测试步骤**:
1. 在内容列表中点击"编辑"按钮
2. 修改内容信息
3. 点击"确定"

**预期结果**:
- ✅ 表单预填充原有数据
- ✅ 富文本编辑器显示原有内容
- ✅ 更新成功提示
- ✅ 内容列表刷新

#### 4.4 删除内容

**测试步骤**:
1. 在内容列表中点击"删除"按钮
2. 在确认对话框中点击"确定"

**预期结果**:
- ✅ 显示确认对话框
- ✅ 删除成功提示
- ✅ 内容列表刷新

### 5. 分类管理

#### 5.1 查看分类树

**测试步骤**:
1. 点击左侧菜单"分类管理"
2. 选择站点
3. 查看分类树

**预期结果**:
- ✅ 显示树形表格
- ✅ 可以展开/折叠子分类
- ✅ 显示分类信息(名称、编码、排序、可见性)

#### 5.2 新增顶级分类

**测试步骤**:
1. 点击"新增分类"按钮
2. 填写表单:
   - 选择站点
   - 输入分类名称
   - 输入分类编码
   - 输入描述
   - 设置排序
   - 设置可见性
3. 点击"确定"

**预期结果**:
- ✅ 表单验证通过
- ✅ 创建成功提示
- ✅ 分类树刷新,显示新分类

#### 5.3 添加子分类

**测试步骤**:
1. 在分类列表中点击"添加子分类"按钮
2. 填写表单(父分类自动选中)
3. 点击"确定"

**预期结果**:
- ✅ 父分类字段自动填充
- ✅ 创建成功提示
- ✅ 分类树刷新,显示新子分类

#### 5.4 编辑分类

**测试步骤**:
1. 在分类列表中点击"编辑"按钮
2. 修改分类信息
3. 点击"确定"

**预期结果**:
- ✅ 表单预填充原有数据
- ✅ 站点ID和父分类ID不可修改
- ✅ 更新成功提示
- ✅ 分类树刷新

#### 5.5 切换可见性

**测试步骤**:
1. 在分类列表中点击"显示"或"隐藏"按钮

**预期结果**:
- ✅ 可见性立即更新
- ✅ 按钮文字切换

#### 5.6 删除分类

**测试步骤**:
1. 在分类列表中点击"删除"按钮
2. 在确认对话框中点击"确定"

**预期结果**:
- ✅ 如果有子分类,提示无法删除
- ✅ 如果没有子分类,删除成功
- ✅ 分类树刷新

### 6. 用户管理

#### 6.1 查看用户列表

**测试步骤**:
1. 点击左侧菜单"用户管理"
2. 查看用户列表

**预期结果**:
- ✅ 显示用户列表
- ✅ 显示用户信息(用户名、邮箱、状态、角色)
- ✅ 显示分页

## 性能测试

### 1. 页面加载速度
- ✅ 首页加载时间 < 2秒
- ✅ 列表页加载时间 < 1秒
- ✅ 详情页加载时间 < 1秒

### 2. API响应时间
- ✅ 查询接口响应时间 < 500ms
- ✅ 创建接口响应时间 < 1秒
- ✅ 更新接口响应时间 < 1秒
- ✅ 删除接口响应时间 < 500ms

## 兼容性测试

### 浏览器兼容性
- ✅ Chrome (最新版)
- ✅ Firefox (最新版)
- ✅ Edge (最新版)
- ⚠️ Safari (需测试)
- ⚠️ IE11 (不支持)

### 屏幕分辨率
- ✅ 1920x1080
- ✅ 1366x768
- ⚠️ 移动端 (需优化)

## 安全测试

### 1. 认证测试
- ✅ 未登录访问受保护页面,自动跳转到登录页
- ✅ Token过期后,自动跳转到登录页
- ✅ 登录失败提示

### 2. 权限测试
- ✅ 无权限访问接口,返回403
- ✅ 前端根据权限显示/隐藏功能按钮

### 3. 输入验证
- ✅ 前端表单验证
- ✅ 后端参数验证
- ✅ SQL注入防护
- ✅ XSS防护

## 已知问题

1. ⚠️ 登录接口偶尔返回"登录失败"(需进一步调查)
2. ⚠️ 移动端布局需要优化
3. ⚠️ 主题配置和高级配置功能未实现

## 测试结论

### 已通过测试的功能
- ✅ 站点管理(查看、新增、编辑、删除、配置)
- ✅ 内容管理(查看、新增、编辑、删除)
- ✅ 分类管理(查看、新增、编辑、删除、切换可见性)
- ✅ 用户管理(查看)
- ✅ 文件上传(图片)
- ✅ 富文本编辑器
- ✅ 权限控制

### 待完善的功能
- ⚠️ 站点统计
- ⚠️ 主题配置
- ⚠️ 自定义CSS/JS
- ⚠️ 批量操作
- ⚠️ 移动端适配

## 测试建议

1. 定期进行回归测试
2. 添加自动化测试
3. 进行压力测试
4. 优化移动端体验
5. 完善错误处理和提示

