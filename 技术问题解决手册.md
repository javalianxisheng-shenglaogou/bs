# 毕业设计技术问题解决手册

## 目录
1. [环境配置问题](#环境配置问题)
2. [Spring Boot常见问题](#spring-boot常见问题)
3. [数据库相关问题](#数据库相关问题)
4. [前端开发问题](#前端开发问题)
5. [部署运维问题](#部署运维问题)
6. [性能优化问题](#性能优化问题)

---

## 环境配置问题

### 1.1 JDK版本问题

**问题：** 系统中有多个JDK版本，项目无法正常启动
```bash
# 错误信息示例
Error: A JNI error has occurred, please check your installation and try again
Exception in thread "main" java.lang.UnsupportedClassVersionError
```

**解决方案：**
```bash
# 1. 查看当前Java版本
java -version
javac -version

# 2. 查看JAVA_HOME设置
echo $JAVA_HOME  # Linux/Mac
echo %JAVA_HOME% # Windows

# 3. 设置正确的JAVA_HOME
# Windows
set JAVA_HOME=C:\Program Files\Java\jdk-17
set PATH=%JAVA_HOME%\bin;%PATH%

# Linux/Mac
export JAVA_HOME=/usr/lib/jvm/java-17-openjdk
export PATH=$JAVA_HOME/bin:$PATH

# 4. 在IDE中设置项目JDK
# IntelliJ IDEA: File -> Project Structure -> Project -> Project SDK
```

### 1.2 Maven配置问题

**问题：** Maven依赖下载失败或速度慢
```xml
<!-- 错误信息示例 -->
Could not resolve dependencies for project
Failed to read artifact descriptor
```

**解决方案：**
```xml
<!-- 1. 配置国内镜像源 settings.xml -->
<mirrors>
    <mirror>
        <id>aliyun</id>
        <mirrorOf>central</mirrorOf>
        <name>Aliyun Central</name>
        <url>https://maven.aliyun.com/repository/central</url>
    </mirror>
</mirrors>

<!-- 2. 配置本地仓库路径 -->
<localRepository>D:\maven\repository</localRepository>

<!-- 3. 清理并重新下载依赖 -->
mvn clean install -U
```

### 1.3 IDE配置问题

**问题：** IntelliJ IDEA无法识别Spring Boot项目
**解决方案：**
1. 确保安装了Spring Boot插件
2. 重新导入Maven项目：File -> Reload Maven Projects
3. 清理IDE缓存：File -> Invalidate Caches and Restart
4. 检查项目结构：File -> Project Structure

---

## Spring Boot常见问题

### 2.1 启动失败问题

**问题：** 应用启动时端口被占用
```bash
# 错误信息
Web server failed to start. Port 8080 was already in use.
```

**解决方案：**
```yaml
# 方案1：修改端口 application.yml
server:
  port: 8081

# 方案2：查找并关闭占用端口的进程
# Windows
netstat -ano | findstr :8080
taskkill /PID <进程ID> /F

# Linux/Mac
lsof -i :8080
kill -9 <进程ID>
```

### 2.2 数据库连接问题

**问题：** 数据库连接失败
```bash
# 错误信息
Failed to configure a DataSource: 'url' attribute is not specified
Communications link failure
```

**解决方案：**
```yaml
# application.yml 正确配置
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/graduation_project?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true
    username: root
    password: your_password
    driver-class-name: com.mysql.cj.jdbc.Driver
    
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQL8Dialect
        format_sql: true
```

### 2.3 跨域问题

**问题：** 前端请求后端API被CORS策略阻止
```javascript
// 错误信息
Access to XMLHttpRequest at 'http://localhost:8080/api/users' 
from origin 'http://localhost:3000' has been blocked by CORS policy
```

**解决方案：**
```java
// 方案1：全局CORS配置
@Configuration
public class CorsConfig {
    
    @Bean
    public CorsFilter corsFilter() {
        CorsConfiguration config = new CorsConfiguration();
        config.addAllowedOriginPattern("*");
        config.addAllowedMethod("*");
        config.addAllowedHeader("*");
        config.setAllowCredentials(true);
        
        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();
        source.registerCorsConfiguration("/**", config);
        
        return new CorsFilter(source);
    }
}

// 方案2：Controller级别配置
@RestController
@CrossOrigin(origins = "http://localhost:3000")
public class UserController {
    // ...
}
```

### 2.4 JSON序列化问题

**问题：** 日期格式序列化异常
```java
// 错误信息
JSON parse error: Cannot deserialize value of type `java.time.LocalDateTime`
```

**解决方案：**
```yaml
# application.yml
spring:
  jackson:
    date-format: yyyy-MM-dd HH:mm:ss
    time-zone: GMT+8
    serialization:
      write-dates-as-timestamps: false
```

```java
// 实体类注解
@JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss")
private LocalDateTime createdAt;
```

---

## 数据库相关问题

### 3.1 SQL语法错误

**问题：** MySQL关键字冲突
```sql
-- 错误示例
CREATE TABLE order (
    id BIGINT PRIMARY KEY,
    name VARCHAR(50)
);
-- Error: You have an error in your SQL syntax near 'order'
```

**解决方案：**
```sql
-- 使用反引号包围关键字
CREATE TABLE `order` (
    id BIGINT PRIMARY KEY,
    name VARCHAR(50)
);

-- 或者避免使用关键字
CREATE TABLE orders (
    id BIGINT PRIMARY KEY,
    name VARCHAR(50)
);
```

### 3.2 字符编码问题

**问题：** 中文数据乱码
**解决方案：**
```sql
-- 1. 创建数据库时指定字符集
CREATE DATABASE graduation_project 
CHARACTER SET utf8mb4 
COLLATE utf8mb4_unicode_ci;

-- 2. 创建表时指定字符集
CREATE TABLE users (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- 3. 连接URL添加编码参数
jdbc:mysql://localhost:3306/graduation_project?useUnicode=true&characterEncoding=utf8mb4
```

### 3.3 事务问题

**问题：** @Transactional注解不生效
**解决方案：**
```java
// 1. 确保方法是public的
@Service
@Transactional
public class UserServiceImpl {
    
    @Transactional(rollbackFor = Exception.class)
    public void createUser(User user) {
        // 业务逻辑
    }
}

// 2. 避免自调用问题
@Service
public class UserServiceImpl {
    
    @Autowired
    private UserServiceImpl self; // 注入自己
    
    public void methodA() {
        self.methodB(); // 通过代理调用
    }
    
    @Transactional
    public void methodB() {
        // 事务方法
    }
}
```

---

## 前端开发问题

### 4.1 Vue.js路由问题

**问题：** 页面刷新后404错误
**解决方案：**
```javascript
// 1. 配置路由模式
const router = createRouter({
  history: createWebHistory(), // 使用HTML5 History模式
  routes: [
    // 路由配置
  ]
})

// 2. 服务器配置（nginx）
location / {
  try_files $uri $uri/ /index.html;
}
```

### 4.2 API请求问题

**问题：** Axios请求失败
```javascript
// 错误处理
axios.interceptors.response.use(
  response => response,
  error => {
    if (error.response) {
      // 服务器响应错误
      console.error('Response error:', error.response.status);
    } else if (error.request) {
      // 请求发送失败
      console.error('Request error:', error.request);
    } else {
      // 其他错误
      console.error('Error:', error.message);
    }
    return Promise.reject(error);
  }
);
```

### 4.3 组件通信问题

**问题：** 父子组件数据传递
**解决方案：**
```vue
<!-- 父组件 -->
<template>
  <ChildComponent 
    :data="parentData" 
    @update="handleUpdate" 
  />
</template>

<script>
export default {
  data() {
    return {
      parentData: 'Hello'
    }
  },
  methods: {
    handleUpdate(newData) {
      this.parentData = newData;
    }
  }
}
</script>

<!-- 子组件 -->
<template>
  <div @click="updateParent">{{ data }}</div>
</template>

<script>
export default {
  props: ['data'],
  methods: {
    updateParent() {
      this.$emit('update', 'New Data');
    }
  }
}
</script>
```

---

## 部署运维问题

### 5.1 打包部署问题

**问题：** Spring Boot打包后运行失败
```bash
# 错误信息
no main manifest attribute, in app.jar
```

**解决方案：**
```xml
<!-- pom.xml 添加Spring Boot Maven插件 -->
<build>
    <plugins>
        <plugin>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-maven-plugin</artifactId>
        </plugin>
    </plugins>
</build>

<!-- 打包命令 -->
mvn clean package -DskipTests

<!-- 运行命令 -->
java -jar target/graduation-project-1.0.0.jar
```

### 5.2 Docker部署问题

**问题：** Docker容器无法访问数据库
**解决方案：**
```dockerfile
# Dockerfile
FROM openjdk:17-jre-slim

WORKDIR /app

COPY target/graduation-project-1.0.0.jar app.jar

EXPOSE 8080

ENTRYPOINT ["java", "-jar", "app.jar"]
```

```yaml
# docker-compose.yml
version: '3.8'
services:
  app:
    build: .
    ports:
      - "8080:8080"
    environment:
      - SPRING_PROFILES_ACTIVE=docker
      - SPRING_DATASOURCE_URL=jdbc:mysql://mysql:3306/graduation_project
    depends_on:
      - mysql
    networks:
      - app-network
  
  mysql:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: rootpassword
      MYSQL_DATABASE: graduation_project
    ports:
      - "3306:3306"
    networks:
      - app-network

networks:
  app-network:
    driver: bridge
```

---

## 性能优化问题

### 6.1 数据库查询优化

**问题：** 查询速度慢
**解决方案：**
```sql
-- 1. 添加索引
CREATE INDEX idx_username ON users(username);
CREATE INDEX idx_created_at ON users(created_at);

-- 2. 优化查询语句
-- 避免SELECT *
SELECT id, username, email FROM users WHERE status = 1;

-- 使用LIMIT分页
SELECT * FROM users ORDER BY created_at DESC LIMIT 10 OFFSET 20;

-- 3. 分析查询计划
EXPLAIN SELECT * FROM users WHERE username = 'test';
```

### 6.2 缓存优化

**问题：** 频繁查询数据库
**解决方案：**
```java
// 1. 启用缓存
@EnableCaching
@SpringBootApplication
public class Application {
    // ...
}

// 2. 使用缓存注解
@Service
public class UserService {
    
    @Cacheable(value = "users", key = "#id")
    public User findById(Long id) {
        return userRepository.findById(id).orElse(null);
    }
    
    @CacheEvict(value = "users", key = "#user.id")
    public void updateUser(User user) {
        userRepository.save(user);
    }
}

// 3. 配置Redis缓存
spring:
  redis:
    host: localhost
    port: 6379
    timeout: 2000ms
    lettuce:
      pool:
        max-active: 8
        max-idle: 8
        min-idle: 0
```

### 6.3 JVM优化

**问题：** 内存溢出或GC频繁
**解决方案：**
```bash
# JVM参数优化
java -Xms512m -Xmx1024m -XX:+UseG1GC -XX:MaxGCPauseMillis=200 -jar app.jar

# 监控JVM状态
jstat -gc <pid> 1s
jmap -histo <pid>
```

---

## 调试技巧

### 7.1 日志调试
```yaml
# application.yml 日志配置
logging:
  level:
    com.example.graduation: DEBUG
    org.springframework.web: DEBUG
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
```

### 7.2 断点调试
- 在IDE中设置断点
- 使用条件断点
- 观察变量值变化
- 单步执行代码

### 7.3 网络调试
```bash
# 检查端口占用
netstat -tulpn | grep :8080

# 测试网络连通性
telnet localhost 8080
curl -I http://localhost:8080/api/health

# 查看HTTP请求详情
curl -v http://localhost:8080/api/users
```

---

## 紧急问题处理

### 系统崩溃处理流程
1. **立即响应**：记录错误信息和时间
2. **问题定位**：查看日志文件，定位错误原因
3. **快速修复**：回滚到稳定版本或热修复
4. **验证修复**：测试系统功能是否正常
5. **总结分析**：分析问题原因，制定预防措施

### 常用命令速查
```bash
# 查看Java进程
jps -l

# 查看端口占用
netstat -ano | findstr :8080

# 查看系统资源
top
htop

# 查看磁盘空间
df -h

# 查看内存使用
free -h
```

---

## 求助渠道

1. **官方文档**：Spring Boot、Vue.js等官方文档
2. **技术社区**：Stack Overflow、掘金、CSDN
3. **GitHub Issues**：相关项目的Issue页面
4. **技术群组**：QQ群、微信群、钉钉群
5. **导师指导**：及时向导师汇报问题
6. **同学互助**：与同学交流讨论

**记住：遇到问题不要慌张，系统性地分析和解决问题是程序员的基本技能！**
