# 多站点内容管理系统（Multi-Site CMS）需求分析文档

## 文档信息

| 项目 | 内容 |
|------|------|
| 项目名称 | 多站点内容管理系统 |
| 文档版本 | v2.0 |
| 编写日期 | 2025-10-02 |
| 编写人 | 系统架构师 |
| 项目类型 | 毕业设计项目 |
| 技术栈 | Spring Boot + Vue.js + MySQL |

---

## 目录

1. [项目概述](#1-项目概述)
2. [系统架构设计](#2-系统架构设计)
3. [数据库设计](#3-数据库设计)
4. [后端设计](#4-后端设计)
5. [前端设计](#5-前端设计)
6. [接口设计](#6-接口设计)
7. [安全设计](#7-安全设计)
8. [性能优化](#8-性能优化)
9. [部署方案](#9-部署方案)
10. [测试计划](#10-测试计划)

---

## 1. 项目概述

### 1.1 项目背景

随着互联网的发展，企业和组织往往需要管理多个网站或应用，这些网站可能面向不同的用户群体、提供不同的服务内容。传统的单站点CMS无法满足多站点统一管理的需求，因此需要开发一个支持多站点管理、内容共享、权限隔离的现代化内容管理系统。

### 1.2 项目目标

- **多站点管理**：支持在一个系统中管理多个独立站点
- **内容共享**：支持内容在不同站点间共享和引用
- **权限隔离**：不同站点的管理员只能管理自己的站点
- **工作流审批**：支持内容发布前的多级审批流程
- **多语言支持**：支持内容的多语言版本管理
- **版本控制**：支持内容的版本管理和回滚
- **定时发布**：支持内容的定时发布功能
- **数据统计**：提供内容浏览、用户行为等数据统计

### 1.3 用户角色

| 角色 | 权限范围 | 主要功能 |
|------|---------|---------|
| 超级管理员 | 全系统 | 系统配置、用户管理、站点管理、全局数据查看 |
| 站点管理员 | 单个站点 | 站点配置、内容管理、用户管理（站点级） |
| 编辑者 | 单个站点 | 内容创建、编辑、提交审核 |
| 审核者 | 单个站点 | 内容审核、发布、撤回 |
| 翻译者 | 单个站点 | 内容翻译、多语言版本管理 |
| 访客 | 公开内容 | 浏览公开内容 |

### 1.4 核心功能模块

```
多站点CMS系统
├── 用户权限管理模块
│   ├── 用户管理
│   ├── 角色管理
│   ├── 权限管理
│   └── 登录认证
├── 站点管理模块
│   ├── 站点创建
│   ├── 站点配置
│   ├── 域名管理
│   └── 主题管理
├── 内容管理模块
│   ├── 内容创建
│   ├── 内容编辑
│   ├── 分类管理
│   ├── 标签管理
│   └── 媒体库管理
├── 工作流模块
│   ├── 工作流定义
│   ├── 审批流程
│   ├── 任务管理
│   └── 历史记录
├── 多语言模块
│   ├── 语言管理
│   ├── 内容翻译
│   ├── 翻译记忆库
│   └── 术语库
├── 版本控制模块
│   ├── 版本创建
│   ├── 版本对比
│   ├── 版本回滚
│   └── 变更历史
├── 内容共享模块
│   ├── 内容引用
│   ├── 跨站点发布
│   └── 共享规则
├── 数据统计模块
│   ├── 内容统计
│   ├── 用户行为分析
│   ├── 访问统计
│   └── 报表生成
└── 系统管理模块
    ├── 系统配置
    ├── 日志管理
    ├── 备份恢复
    └── 监控告警
```

---

## 2. 系统架构设计

### 2.1 总体架构

```
┌─────────────────────────────────────────────────────────┐
│                      前端层 (Vue.js)                      │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐ │
│  │ 管理后台  │  │ 内容编辑  │  │ 数据统计  │  │ 系统设置  │ │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘ │
└─────────────────────────────────────────────────────────┘
                            ↕ HTTP/HTTPS
┌─────────────────────────────────────────────────────────┐
│                   API网关层 (Spring Gateway)              │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐ │
│  │ 路由转发  │  │ 负载均衡  │  │ 限流熔断  │  │ 统一认证  │ │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘ │
└─────────────────────────────────────────────────────────┘
                            ↕
┌─────────────────────────────────────────────────────────┐
│                  应用服务层 (Spring Boot)                 │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐ │
│  │ 用户服务  │  │ 内容服务  │  │ 工作流服务 │  │ 统计服务  │ │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘ │
└─────────────────────────────────────────────────────────┘
                            ↕
┌─────────────────────────────────────────────────────────┐
│                      数据层 (MySQL)                       │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐ │
│  │ 用户数据  │  │ 内容数据  │  │ 工作流数据 │  │ 日志数据  │ │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘ │
└─────────────────────────────────────────────────────────┘
                            ↕
┌─────────────────────────────────────────────────────────┐
│                    缓存层 (Redis)                         │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐ │
│  │ 会话缓存  │  │ 数据缓存  │  │ 分布式锁  │  │ 消息队列  │ │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘ │
└─────────────────────────────────────────────────────────┘
```

### 2.2 技术选型

#### 2.2.1 后端技术栈

| 技术 | 版本 | 用途 |
|------|------|------|
| Spring Boot | 2.7.18 | 应用框架 |
| Spring Security | 5.7.x | 安全框架 |
| Spring Data JPA | 2.7.x | 数据访问 |
| MySQL | 8.0+ | 关系数据库 |
| Redis | 6.0+ | 缓存/会话 |
| JWT | 0.11.x | 令牌认证 |
| Swagger | 3.0 | API文档 |
| Lombok | 1.18.x | 代码简化 |
| MapStruct | 1.5.x | 对象映射 |
| Hibernate Validator | 6.2.x | 参数校验 |
| Apache POI | 5.2.x | Excel导出 |
| Quartz | 2.3.x | 定时任务 |

#### 2.2.2 前端技术栈

| 技术 | 版本 | 用途 |
|------|------|------|
| Vue.js | 3.3+ | 前端框架 |
| TypeScript | 5.0+ | 类型系统 |
| Vite | 4.0+ | 构建工具 |
| Element Plus | 2.3+ | UI组件库 |
| Pinia | 2.1+ | 状态管理 |
| Vue Router | 4.2+ | 路由管理 |
| Axios | 1.4+ | HTTP客户端 |
| ECharts | 5.4+ | 数据可视化 |
| TinyMCE | 6.0+ | 富文本编辑器 |
| Day.js | 1.11+ | 日期处理 |

### 2.3 分层架构

```
┌─────────────────────────────────────┐
│         Controller Layer            │  ← 控制器层：接收请求、参数校验
├─────────────────────────────────────┤
│          Service Layer              │  ← 业务逻辑层：业务处理、事务管理
├─────────────────────────────────────┤
│        Repository Layer             │  ← 数据访问层：数据库操作
├─────────────────────────────────────┤
│          Entity Layer               │  ← 实体层：数据模型
└─────────────────────────────────────┘
```

---

## 3. 数据库设计

### 3.1 数据库设计原则

1. **规范化设计**：遵循第三范式（3NF），减少数据冗余
2. **合理反规范化**：在查询性能关键的地方适当反规范化
3. **统一命名规范**：
   - 表名：小写字母+下划线，复数形式（如：users, contents）
   - 字段名：小写字母+下划线（如：user_id, created_at）
   - 索引名：idx_表名_字段名（如：idx_users_email）
   - 外键名：fk_表名_引用表名（如：fk_contents_users）
4. **字段设计规范**：
   - 主键统一使用 BIGINT AUTO_INCREMENT
   - 时间字段统一使用 DATETIME 类型
   - 金额字段使用 DECIMAL(19,2)
   - 布尔字段使用 TINYINT(1)
   - 枚举字段使用 VARCHAR 存储
5. **必备字段**：每个表都包含
   - id：主键
   - created_at：创建时间
   - updated_at：更新时间
   - created_by：创建人ID
   - updated_by：更新人ID
   - deleted：软删除标记
   - version：乐观锁版本号

### 3.2 数据库ER图

```
┌─────────────┐         ┌─────────────┐         ┌─────────────┐
│    users    │────────>│ user_roles  │<────────│    roles    │
│  (用户表)    │  1:N    │(用户角色表)  │  N:1    │  (角色表)    │
└─────────────┘         └─────────────┘         └─────────────┘
       │                                                │
       │ 1:N                                           │ N:M
       ↓                                                ↓
┌─────────────┐         ┌─────────────┐         ┌─────────────┐
│    sites    │────────>│site_configs │         │ permissions │
│  (站点表)    │  1:N    │(站点配置表)  │         │  (权限表)    │
└─────────────┘         └─────────────┘         └─────────────┘
       │
       │ 1:N
       ↓
┌─────────────┐         ┌─────────────┐         ┌─────────────┐
│  contents   │────────>│content_i18n │         │ categories  │
│  (内容表)    │  1:N    │(内容翻译表)  │         │  (分类表)    │
└─────────────┘         └─────────────┘         └─────────────┘
       │                                                │
       │ 1:N                                           │ 1:N
       ↓                                                ↓
┌─────────────┐         ┌─────────────┐         ┌─────────────┐
│content_tags │         │content_     │         │   tags      │
│(内容标签表)  │         │ versions    │         │  (标签表)    │
└─────────────┘         │(内容版本表)  │         └─────────────┘
                        └─────────────┘
```

### 3.3 核心表设计

#### 3.3.1 用户权限模块

**1. users (用户表)**

```sql
CREATE TABLE users (
    -- 基础字段
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '用户ID',
    username VARCHAR(50) NOT NULL UNIQUE COMMENT '用户名',
    email VARCHAR(100) NOT NULL UNIQUE COMMENT '邮箱',
    mobile VARCHAR(20) UNIQUE COMMENT '手机号',
    password_hash VARCHAR(255) NOT NULL COMMENT '密码哈希',
    
    -- 个人信息
    nickname VARCHAR(50) COMMENT '昵称',
    real_name VARCHAR(50) COMMENT '真实姓名',
    avatar_url VARCHAR(500) COMMENT '头像URL',
    gender ENUM('MALE', 'FEMALE', 'OTHER') COMMENT '性别',
    birthday DATE COMMENT '生日',
    bio TEXT COMMENT '个人简介',
    
    -- 状态信息
    status ENUM('ACTIVE', 'INACTIVE', 'LOCKED', 'PENDING') DEFAULT 'PENDING' COMMENT '用户状态',
    email_verified TINYINT(1) DEFAULT 0 COMMENT '邮箱是否验证',
    mobile_verified TINYINT(1) DEFAULT 0 COMMENT '手机是否验证',
    
    -- 登录信息
    last_login_at DATETIME COMMENT '最后登录时间',
    last_login_ip VARCHAR(50) COMMENT '最后登录IP',
    login_count INT DEFAULT 0 COMMENT '登录次数',
    failed_login_count INT DEFAULT 0 COMMENT '失败登录次数',
    locked_until DATETIME COMMENT '锁定截止时间',
    
    -- 审计字段
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    created_by BIGINT COMMENT '创建人ID',
    updated_by BIGINT COMMENT '更新人ID',
    deleted TINYINT(1) NOT NULL DEFAULT 0 COMMENT '删除标记',
    version INT NOT NULL DEFAULT 0 COMMENT '版本号',
    
    -- 索引
    INDEX idx_username (username),
    INDEX idx_email (email),
    INDEX idx_mobile (mobile),
    INDEX idx_status (status),
    INDEX idx_created_at (created_at),
    INDEX idx_deleted (deleted)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='用户表';
```

**2. roles (角色表)**

```sql
CREATE TABLE roles (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '角色ID',
    name VARCHAR(50) NOT NULL COMMENT '角色名称',
    code VARCHAR(50) NOT NULL UNIQUE COMMENT '角色代码',
    description VARCHAR(500) COMMENT '角色描述',
    
    -- 角色属性
    level INT NOT NULL DEFAULT 0 COMMENT '角色级别',
    is_system TINYINT(1) NOT NULL DEFAULT 0 COMMENT '是否系统角色',
    is_default TINYINT(1) NOT NULL DEFAULT 0 COMMENT '是否默认角色',
    
    -- 审计字段
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT,
    updated_by BIGINT,
    deleted TINYINT(1) NOT NULL DEFAULT 0,
    version INT NOT NULL DEFAULT 0,
    
    INDEX idx_code (code),
    INDEX idx_level (level),
    INDEX idx_deleted (deleted)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='角色表';
```

**3. permissions (权限表)**

```sql
CREATE TABLE permissions (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '权限ID',
    name VARCHAR(100) NOT NULL COMMENT '权限名称',
    code VARCHAR(100) NOT NULL UNIQUE COMMENT '权限代码',
    description VARCHAR(500) COMMENT '权限描述',
    
    -- 权限分类
    module VARCHAR(50) NOT NULL COMMENT '所属模块',
    resource VARCHAR(100) NOT NULL COMMENT '资源标识',
    action VARCHAR(50) NOT NULL COMMENT '操作类型',
    
    -- 权限属性
    is_system TINYINT(1) NOT NULL DEFAULT 0 COMMENT '是否系统权限',
    sort_order INT DEFAULT 0 COMMENT '排序',
    
    -- 审计字段
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT,
    updated_by BIGINT,
    deleted TINYINT(1) NOT NULL DEFAULT 0,
    
    UNIQUE KEY uk_resource_action (resource, action),
    INDEX idx_module (module),
    INDEX idx_code (code)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='权限表';
```

**4. user_roles (用户角色关联表)**

```sql
CREATE TABLE user_roles (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'ID',
    user_id BIGINT NOT NULL COMMENT '用户ID',
    role_id BIGINT NOT NULL COMMENT '角色ID',
    site_id BIGINT COMMENT '站点ID（站点级角色）',
    
    -- 授权信息
    granted_by BIGINT NOT NULL COMMENT '授权人ID',
    granted_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '授权时间',
    expires_at DATETIME COMMENT '过期时间',
    
    -- 审计字段
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    deleted TINYINT(1) NOT NULL DEFAULT 0,
    
    UNIQUE KEY uk_user_role_site (user_id, role_id, site_id),
    INDEX idx_user_id (user_id),
    INDEX idx_role_id (role_id),
    INDEX idx_site_id (site_id),
    INDEX idx_expires_at (expires_at),
    
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    FOREIGN KEY (role_id) REFERENCES roles(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='用户角色关联表';
```

**5. role_permissions (角色权限关联表)**

```sql
CREATE TABLE role_permissions (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'ID',
    role_id BIGINT NOT NULL COMMENT '角色ID',
    permission_id BIGINT NOT NULL COMMENT '权限ID',
    
    -- 审计字段
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    created_by BIGINT,
    
    UNIQUE KEY uk_role_permission (role_id, permission_id),
    INDEX idx_role_id (role_id),
    INDEX idx_permission_id (permission_id),
    
    FOREIGN KEY (role_id) REFERENCES roles(id) ON DELETE CASCADE,
    FOREIGN KEY (permission_id) REFERENCES permissions(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='角色权限关联表';
```

#### 3.3.2 站点管理模块

**6. sites (站点表)**

```sql
CREATE TABLE sites (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '站点ID',
    name VARCHAR(100) NOT NULL COMMENT '站点名称',
    code VARCHAR(50) NOT NULL UNIQUE COMMENT '站点代码',
    
    -- 域名信息
    primary_domain VARCHAR(255) COMMENT '主域名',
    domains JSON COMMENT '域名列表',
    
    -- 站点信息
    description TEXT COMMENT '站点描述',
    logo_url VARCHAR(500) COMMENT 'Logo URL',
    favicon_url VARCHAR(500) COMMENT 'Favicon URL',
    keywords VARCHAR(500) COMMENT 'SEO关键词',
    
    -- 站点配置
    theme VARCHAR(50) DEFAULT 'default' COMMENT '主题',
    language VARCHAR(10) DEFAULT 'zh-CN' COMMENT '默认语言',
    timezone VARCHAR(50) DEFAULT 'Asia/Shanghai' COMMENT '时区',
    date_format VARCHAR(50) DEFAULT 'YYYY-MM-DD' COMMENT '日期格式',
    time_format VARCHAR(50) DEFAULT 'HH:mm:ss' COMMENT '时间格式',
    
    -- 站点状态
    status ENUM('ACTIVE', 'INACTIVE', 'MAINTENANCE', 'SUSPENDED') DEFAULT 'ACTIVE' COMMENT '站点状态',
    owner_id BIGINT NOT NULL COMMENT '站点所有者ID',
    parent_site_id BIGINT COMMENT '父站点ID',
    
    -- 统计信息
    content_count INT DEFAULT 0 COMMENT '内容数量',
    user_count INT DEFAULT 0 COMMENT '用户数量',
    visit_count BIGINT DEFAULT 0 COMMENT '访问次数',
    
    -- 审计字段
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT,
    updated_by BIGINT,
    deleted TINYINT(1) NOT NULL DEFAULT 0,
    version INT NOT NULL DEFAULT 0,
    
    INDEX idx_code (code),
    INDEX idx_status (status),
    INDEX idx_owner_id (owner_id),
    INDEX idx_parent_site_id (parent_site_id),
    
    FOREIGN KEY (owner_id) REFERENCES users(id),
    FOREIGN KEY (parent_site_id) REFERENCES sites(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='站点表';
```

**7. site_configs (站点配置表)**

```sql
CREATE TABLE site_configs (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '配置ID',
    site_id BIGINT NOT NULL COMMENT '站点ID',

    -- 配置信息
    config_key VARCHAR(100) NOT NULL COMMENT '配置键',
    config_value TEXT COMMENT '配置值',
    config_type ENUM('STRING', 'NUMBER', 'BOOLEAN', 'JSON', 'TEXT') DEFAULT 'STRING' COMMENT '配置类型',

    -- 配置属性
    category VARCHAR(50) COMMENT '配置分类',
    description VARCHAR(500) COMMENT '配置描述',
    is_public TINYINT(1) DEFAULT 0 COMMENT '是否公开配置',
    is_encrypted TINYINT(1) DEFAULT 0 COMMENT '是否加密存储',

    -- 审计字段
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT,
    updated_by BIGINT,
    deleted TINYINT(1) NOT NULL DEFAULT 0,

    UNIQUE KEY uk_site_config (site_id, config_key),
    INDEX idx_site_id (site_id),
    INDEX idx_category (category),

    FOREIGN KEY (site_id) REFERENCES sites(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='站点配置表';
```

#### 3.3.3 内容管理模块

**8. categories (分类表)**

```sql
CREATE TABLE categories (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '分类ID',
    site_id BIGINT NOT NULL COMMENT '所属站点ID',

    -- 分类信息
    name VARCHAR(100) NOT NULL COMMENT '分类名称',
    slug VARCHAR(100) COMMENT 'URL别名',
    description TEXT COMMENT '分类描述',

    -- 树形结构
    parent_id BIGINT COMMENT '父分类ID',
    level INT NOT NULL DEFAULT 1 COMMENT '层级',
    path VARCHAR(500) COMMENT '分类路径',

    -- 显示设置
    icon VARCHAR(100) COMMENT '图标',
    cover_image VARCHAR(500) COMMENT '封面图片',
    sort_order INT DEFAULT 0 COMMENT '排序',
    is_nav TINYINT(1) DEFAULT 0 COMMENT '是否显示在导航',

    -- SEO设置
    seo_title VARCHAR(255) COMMENT 'SEO标题',
    seo_keywords VARCHAR(500) COMMENT 'SEO关键词',
    seo_description VARCHAR(1000) COMMENT 'SEO描述',

    -- 统计信息
    content_count INT DEFAULT 0 COMMENT '内容数量',

    -- 审计字段
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT,
    updated_by BIGINT,
    deleted TINYINT(1) NOT NULL DEFAULT 0,
    version INT NOT NULL DEFAULT 0,

    UNIQUE KEY uk_site_slug (site_id, slug),
    INDEX idx_site_id (site_id),
    INDEX idx_parent_id (parent_id),
    INDEX idx_level (level),
    INDEX idx_sort_order (sort_order),

    FOREIGN KEY (site_id) REFERENCES sites(id) ON DELETE CASCADE,
    FOREIGN KEY (parent_id) REFERENCES categories(id) ON DELETE SET NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='分类表';
```

**9. tags (标签表)**

```sql
CREATE TABLE tags (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '标签ID',
    site_id BIGINT NOT NULL COMMENT '所属站点ID',

    -- 标签信息
    name VARCHAR(50) NOT NULL COMMENT '标签名称',
    slug VARCHAR(50) COMMENT 'URL别名',
    description VARCHAR(500) COMMENT '标签描述',
    color VARCHAR(20) COMMENT '标签颜色',

    -- 统计信息
    usage_count INT DEFAULT 0 COMMENT '使用次数',

    -- 审计字段
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT,
    deleted TINYINT(1) NOT NULL DEFAULT 0,

    UNIQUE KEY uk_site_name (site_id, name),
    INDEX idx_site_id (site_id),
    INDEX idx_usage_count (usage_count),

    FOREIGN KEY (site_id) REFERENCES sites(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='标签表';
```

**10. contents (内容表)**

```sql
CREATE TABLE contents (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '内容ID',
    site_id BIGINT NOT NULL COMMENT '所属站点ID',
    category_id BIGINT COMMENT '分类ID',

    -- 基本信息
    title VARCHAR(255) NOT NULL COMMENT '标题',
    slug VARCHAR(255) COMMENT 'URL别名',
    summary TEXT COMMENT '摘要',
    content LONGTEXT COMMENT '内容',

    -- 内容类型
    content_type ENUM('ARTICLE', 'PAGE', 'NEWS', 'PRODUCT', 'CUSTOM') DEFAULT 'ARTICLE' COMMENT '内容类型',
    template VARCHAR(100) COMMENT '模板',

    -- 状态管理
    status ENUM('DRAFT', 'PENDING', 'APPROVED', 'PUBLISHED', 'SCHEDULED', 'ARCHIVED', 'REJECTED') DEFAULT 'DRAFT' COMMENT '状态',
    workflow_instance_id BIGINT COMMENT '工作流实例ID',

    -- 作者信息
    author_id BIGINT NOT NULL COMMENT '作者ID',
    editor_id BIGINT COMMENT '编辑者ID',
    reviewer_id BIGINT COMMENT '审核者ID',

    -- 媒体信息
    featured_image VARCHAR(500) COMMENT '特色图片',
    attachments JSON COMMENT '附件列表',

    -- 显示设置
    is_top TINYINT(1) DEFAULT 0 COMMENT '是否置顶',
    is_featured TINYINT(1) DEFAULT 0 COMMENT '是否推荐',
    is_hot TINYINT(1) DEFAULT 0 COMMENT '是否热门',
    sort_order INT DEFAULT 0 COMMENT '排序',

    -- 互动设置
    allow_comment TINYINT(1) DEFAULT 1 COMMENT '是否允许评论',
    allow_share TINYINT(1) DEFAULT 1 COMMENT '是否允许分享',

    -- 统计信息
    view_count INT DEFAULT 0 COMMENT '浏览次数',
    like_count INT DEFAULT 0 COMMENT '点赞数',
    comment_count INT DEFAULT 0 COMMENT '评论数',
    share_count INT DEFAULT 0 COMMENT '分享次数',

    -- SEO设置
    seo_title VARCHAR(255) COMMENT 'SEO标题',
    seo_keywords VARCHAR(500) COMMENT 'SEO关键词',
    seo_description VARCHAR(1000) COMMENT 'SEO描述',

    -- 时间管理
    publish_at DATETIME COMMENT '发布时间',
    scheduled_at DATETIME COMMENT '定时发布时间',
    archived_at DATETIME COMMENT '归档时间',

    -- 审计字段
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT,
    updated_by BIGINT,
    deleted TINYINT(1) NOT NULL DEFAULT 0,
    version INT NOT NULL DEFAULT 0,

    INDEX idx_site_id (site_id),
    INDEX idx_category_id (category_id),
    INDEX idx_status (status),
    INDEX idx_author_id (author_id),
    INDEX idx_publish_at (publish_at),
    INDEX idx_scheduled_at (scheduled_at),
    INDEX idx_site_status_publish (site_id, status, publish_at),
    INDEX idx_category_status (category_id, status),
    FULLTEXT INDEX ft_title_content (title, content),

    FOREIGN KEY (site_id) REFERENCES sites(id) ON DELETE CASCADE,
    FOREIGN KEY (category_id) REFERENCES categories(id) ON DELETE SET NULL,
    FOREIGN KEY (author_id) REFERENCES users(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='内容表';
```

**11. content_tags (内容标签关联表)**

```sql
CREATE TABLE content_tags (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'ID',
    content_id BIGINT NOT NULL COMMENT '内容ID',
    tag_id BIGINT NOT NULL COMMENT '标签ID',

    -- 审计字段
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    created_by BIGINT,

    UNIQUE KEY uk_content_tag (content_id, tag_id),
    INDEX idx_content_id (content_id),
    INDEX idx_tag_id (tag_id),

    FOREIGN KEY (content_id) REFERENCES contents(id) ON DELETE CASCADE,
    FOREIGN KEY (tag_id) REFERENCES tags(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='内容标签关联表';
```

**12. content_i18n (内容国际化表)**

```sql
CREATE TABLE content_i18n (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'ID',
    content_id BIGINT NOT NULL COMMENT '内容ID',
    language_code VARCHAR(10) NOT NULL COMMENT '语言代码',

    -- 翻译内容
    title VARCHAR(255) NOT NULL COMMENT '标题',
    slug VARCHAR(255) COMMENT 'URL别名',
    summary TEXT COMMENT '摘要',
    content LONGTEXT COMMENT '内容',

    -- SEO翻译
    seo_title VARCHAR(255) COMMENT 'SEO标题',
    seo_keywords VARCHAR(500) COMMENT 'SEO关键词',
    seo_description VARCHAR(1000) COMMENT 'SEO描述',

    -- 翻译状态
    translation_status ENUM('PENDING', 'IN_PROGRESS', 'COMPLETED', 'REVIEWED') DEFAULT 'PENDING' COMMENT '翻译状态',
    translator_id BIGINT COMMENT '翻译者ID',
    reviewer_id BIGINT COMMENT '审核者ID',

    -- 审计字段
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT,
    updated_by BIGINT,
    deleted TINYINT(1) NOT NULL DEFAULT 0,

    UNIQUE KEY uk_content_language (content_id, language_code),
    INDEX idx_content_id (content_id),
    INDEX idx_language_code (language_code),
    INDEX idx_translation_status (translation_status),

    FOREIGN KEY (content_id) REFERENCES contents(id) ON DELETE CASCADE,
    FOREIGN KEY (translator_id) REFERENCES users(id),
    FOREIGN KEY (reviewer_id) REFERENCES users(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='内容国际化表';
```

**13. content_versions (内容版本表)**

```sql
CREATE TABLE content_versions (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '版本ID',
    content_id BIGINT NOT NULL COMMENT '内容ID',

    -- 版本信息
    version_number INT NOT NULL COMMENT '版本号',
    version_name VARCHAR(100) COMMENT '版本名称',

    -- 版本内容
    title VARCHAR(255) NOT NULL COMMENT '标题',
    summary TEXT COMMENT '摘要',
    content LONGTEXT COMMENT '内容',
    content_snapshot JSON COMMENT '完整内容快照',

    -- 变更信息
    change_type ENUM('CREATE', 'UPDATE', 'DELETE', 'RESTORE', 'PUBLISH') DEFAULT 'UPDATE' COMMENT '变更类型',
    change_description VARCHAR(1000) COMMENT '变更说明',
    changed_fields JSON COMMENT '变更字段列表',

    -- 审计字段
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    created_by BIGINT NOT NULL COMMENT '创建人ID',

    UNIQUE KEY uk_content_version (content_id, version_number),
    INDEX idx_content_id (content_id),
    INDEX idx_created_at (created_at),
    INDEX idx_change_type (change_type),

    FOREIGN KEY (content_id) REFERENCES contents(id) ON DELETE CASCADE,
    FOREIGN KEY (created_by) REFERENCES users(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='内容版本表';
```

**14. content_shares (内容共享表)**

```sql
CREATE TABLE content_shares (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT 'ID',
    source_content_id BIGINT NOT NULL COMMENT '源内容ID',
    target_site_id BIGINT NOT NULL COMMENT '目标站点ID',

    -- 共享设置
    share_type ENUM('REFERENCE', 'COPY', 'SYNC') DEFAULT 'REFERENCE' COMMENT '共享类型',
    is_auto_sync TINYINT(1) DEFAULT 0 COMMENT '是否自动同步',

    -- 共享状态
    status ENUM('ACTIVE', 'INACTIVE', 'EXPIRED') DEFAULT 'ACTIVE' COMMENT '共享状态',
    expires_at DATETIME COMMENT '过期时间',

    -- 审计字段
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT,
    deleted TINYINT(1) NOT NULL DEFAULT 0,

    UNIQUE KEY uk_content_site (source_content_id, target_site_id),
    INDEX idx_source_content_id (source_content_id),
    INDEX idx_target_site_id (target_site_id),
    INDEX idx_status (status),

    FOREIGN KEY (source_content_id) REFERENCES contents(id) ON DELETE CASCADE,
    FOREIGN KEY (target_site_id) REFERENCES sites(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='内容共享表';
```

#### 3.3.4 工作流模块

**15. workflows (工作流定义表)**

```sql
CREATE TABLE workflows (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '工作流ID',
    name VARCHAR(100) NOT NULL COMMENT '工作流名称',
    code VARCHAR(50) NOT NULL UNIQUE COMMENT '工作流代码',
    description VARCHAR(500) COMMENT '描述',

    -- 工作流配置
    trigger_type ENUM('MANUAL', 'AUTO', 'SCHEDULED') DEFAULT 'MANUAL' COMMENT '触发类型',
    business_type VARCHAR(50) NOT NULL COMMENT '业务类型',
    site_id BIGINT COMMENT '所属站点ID',

    -- 工作流状态
    status ENUM('DRAFT', 'ACTIVE', 'INACTIVE', 'ARCHIVED') DEFAULT 'DRAFT' COMMENT '状态',
    is_default TINYINT(1) DEFAULT 0 COMMENT '是否默认工作流',

    -- 配置信息
    config JSON COMMENT '配置信息',

    -- 审计字段
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT,
    updated_by BIGINT,
    deleted TINYINT(1) NOT NULL DEFAULT 0,
    version INT NOT NULL DEFAULT 0,

    INDEX idx_code (code),
    INDEX idx_business_type (business_type),
    INDEX idx_site_id (site_id),
    INDEX idx_status (status),

    FOREIGN KEY (site_id) REFERENCES sites(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='工作流定义表';
```

**16. workflow_nodes (工作流节点表)**

```sql
CREATE TABLE workflow_nodes (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '节点ID',
    workflow_id BIGINT NOT NULL COMMENT '工作流ID',

    -- 节点信息
    name VARCHAR(100) NOT NULL COMMENT '节点名称',
    code VARCHAR(50) NOT NULL COMMENT '节点代码',
    node_type ENUM('START', 'APPROVAL', 'NOTIFY', 'END') NOT NULL COMMENT '节点类型',

    -- 节点配置
    assignee_type ENUM('USER', 'ROLE', 'DEPT', 'CUSTOM') COMMENT '审批人类型',
    assignee_ids JSON COMMENT '审批人ID列表',
    approval_mode ENUM('SINGLE', 'ALL', 'ANY') COMMENT '审批模式',

    -- 位置信息
    position_x INT COMMENT 'X坐标',
    position_y INT COMMENT 'Y坐标',

    -- 审计字段
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    deleted TINYINT(1) NOT NULL DEFAULT 0,

    UNIQUE KEY uk_workflow_code (workflow_id, code),
    INDEX idx_workflow_id (workflow_id),

    FOREIGN KEY (workflow_id) REFERENCES workflows(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='工作流节点表';
```

**17. workflow_instances (工作流实例表)**

```sql
CREATE TABLE workflow_instances (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '实例ID',
    workflow_id BIGINT NOT NULL COMMENT '工作流ID',

    -- 业务信息
    business_id BIGINT NOT NULL COMMENT '业务ID',
    business_type VARCHAR(50) NOT NULL COMMENT '业务类型',

    -- 实例状态
    status ENUM('RUNNING', 'COMPLETED', 'REJECTED', 'CANCELLED', 'ERROR') DEFAULT 'RUNNING' COMMENT '实例状态',
    current_node_id BIGINT COMMENT '当前节点ID',

    -- 发起信息
    initiator_id BIGINT NOT NULL COMMENT '发起人ID',
    initiated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '发起时间',

    -- 完成信息
    completed_at DATETIME COMMENT '完成时间',
    completion_reason VARCHAR(500) COMMENT '完成原因',

    -- 审计字段
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,

    INDEX idx_workflow_id (workflow_id),
    INDEX idx_business (business_type, business_id),
    INDEX idx_status (status),
    INDEX idx_initiator_id (initiator_id),

    FOREIGN KEY (workflow_id) REFERENCES workflows(id),
    FOREIGN KEY (initiator_id) REFERENCES users(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='工作流实例表';
```

**18. workflow_tasks (工作流任务表)**

```sql
CREATE TABLE workflow_tasks (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '任务ID',
    instance_id BIGINT NOT NULL COMMENT '实例ID',
    node_id BIGINT NOT NULL COMMENT '节点ID',

    -- 任务信息
    task_name VARCHAR(100) NOT NULL COMMENT '任务名称',
    task_type ENUM('APPROVAL', 'NOTIFY', 'CUSTOM') NOT NULL COMMENT '任务类型',

    -- 任务状态
    status ENUM('PENDING', 'APPROVED', 'REJECTED', 'CANCELLED', 'TIMEOUT') DEFAULT 'PENDING' COMMENT '任务状态',

    -- 分配信息
    assignee_id BIGINT NOT NULL COMMENT '处理人ID',
    assigned_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '分配时间',

    -- 处理信息
    processed_at DATETIME COMMENT '处理时间',
    comment TEXT COMMENT '处理意见',

    -- 超时设置
    due_date DATETIME COMMENT '截止时间',

    -- 审计字段
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,

    INDEX idx_instance_id (instance_id),
    INDEX idx_assignee_id (assignee_id),
    INDEX idx_status (status),
    INDEX idx_due_date (due_date),

    FOREIGN KEY (instance_id) REFERENCES workflow_instances(id) ON DELETE CASCADE,
    FOREIGN KEY (assignee_id) REFERENCES users(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='工作流任务表';
```

#### 3.3.5 系统管理模块

**19. operation_logs (操作日志表)**

```sql
CREATE TABLE operation_logs (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '日志ID',

    -- 操作信息
    operation_type VARCHAR(50) NOT NULL COMMENT '操作类型',
    operation_name VARCHAR(100) NOT NULL COMMENT '操作名称',
    operation_desc VARCHAR(500) COMMENT '操作描述',

    -- 请求信息
    request_method VARCHAR(10) COMMENT '请求方法',
    request_url VARCHAR(500) COMMENT '请求URL',
    request_params TEXT COMMENT '请求参数',
    request_ip VARCHAR(50) COMMENT '请求IP',
    user_agent VARCHAR(500) COMMENT '用户代理',

    -- 响应信息
    response_status INT COMMENT '响应状态码',
    response_data TEXT COMMENT '响应数据',
    error_message TEXT COMMENT '错误信息',

    -- 执行信息
    execution_time INT COMMENT '执行时间(ms)',

    -- 用户信息
    user_id BIGINT COMMENT '操作用户ID',
    username VARCHAR(50) COMMENT '用户名',
    site_id BIGINT COMMENT '站点ID',

    -- 业务信息
    business_type VARCHAR(50) COMMENT '业务类型',
    business_id BIGINT COMMENT '业务ID',

    -- 审计字段
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',

    INDEX idx_user_id (user_id),
    INDEX idx_operation_type (operation_type),
    INDEX idx_created_at (created_at),
    INDEX idx_business (business_type, business_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='操作日志表';
```

**20. system_configs (系统配置表)**

```sql
CREATE TABLE system_configs (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '配置ID',

    -- 配置信息
    config_key VARCHAR(100) NOT NULL UNIQUE COMMENT '配置键',
    config_value TEXT COMMENT '配置值',
    config_type ENUM('STRING', 'NUMBER', 'BOOLEAN', 'JSON', 'TEXT') DEFAULT 'STRING' COMMENT '配置类型',

    -- 配置属性
    category VARCHAR(50) COMMENT '配置分类',
    description VARCHAR(500) COMMENT '配置描述',
    is_public TINYINT(1) DEFAULT 0 COMMENT '是否公开配置',
    is_encrypted TINYINT(1) DEFAULT 0 COMMENT '是否加密存储',

    -- 审计字段
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT,
    updated_by BIGINT,

    INDEX idx_category (category)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='系统配置表';
```

**21. media_files (媒体文件表)**

```sql
CREATE TABLE media_files (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '文件ID',
    site_id BIGINT NOT NULL COMMENT '所属站点ID',

    -- 文件信息
    file_name VARCHAR(255) NOT NULL COMMENT '文件名',
    original_name VARCHAR(255) NOT NULL COMMENT '原始文件名',
    file_path VARCHAR(500) NOT NULL COMMENT '文件路径',
    file_url VARCHAR(500) NOT NULL COMMENT '文件URL',

    -- 文件属性
    file_type VARCHAR(50) COMMENT '文件类型',
    mime_type VARCHAR(100) COMMENT 'MIME类型',
    file_size BIGINT COMMENT '文件大小(字节)',
    file_ext VARCHAR(20) COMMENT '文件扩展名',

    -- 图片属性
    width INT COMMENT '图片宽度',
    height INT COMMENT '图片高度',

    -- 存储信息
    storage_type ENUM('LOCAL', 'OSS', 'S3', 'CDN') DEFAULT 'LOCAL' COMMENT '存储类型',
    bucket VARCHAR(100) COMMENT '存储桶',

    -- 使用信息
    usage_count INT DEFAULT 0 COMMENT '使用次数',

    -- 审计字段
    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    created_by BIGINT,
    deleted TINYINT(1) NOT NULL DEFAULT 0,

    INDEX idx_site_id (site_id),
    INDEX idx_file_type (file_type),
    INDEX idx_created_at (created_at),

    FOREIGN KEY (site_id) REFERENCES sites(id) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='媒体文件表';
```

### 3.4 索引设计策略

#### 3.4.1 主键索引
- 所有表使用 BIGINT AUTO_INCREMENT 作为主键
- 主键自动创建聚簇索引

#### 3.4.2 唯一索引
- 用户名、邮箱、手机号
- 角色代码、权限代码
- 站点代码
- 内容slug（站点+slug组合唯一）

#### 3.4.3 普通索引
- 外键字段
- 状态字段
- 时间字段（created_at, updated_at, publish_at）
- 软删除标记（deleted）
- 常用查询字段

#### 3.4.4 组合索引
- (site_id, status, publish_at) - 内容查询
- (user_id, role_id, site_id) - 用户角色查询
- (business_type, business_id) - 业务关联查询

#### 3.4.5 全文索引
- contents表的(title, content) - 内容搜索

### 3.5 数据字典

完整的数据字典请参考独立文档：`数据字典.xlsx`

---

## 6. 接口设计

详细的接口设计请参考：[需求分析文档-后端设计.md](./需求分析文档-后端设计.md)

---

## 7. 安全设计

### 7.1 认证安全
- JWT令牌认证
- 令牌刷新机制
- 密码BCrypt加密
- 登录失败锁定

### 7.2 授权安全
- RBAC权限模型
- 细粒度权限控制
- 数据权限隔离
- API权限验证

### 7.3 数据安全
- SQL注入防护
- XSS攻击防护
- CSRF防护
- 敏感数据加密
- 数据备份策略

### 7.4 接口安全
- 接口限流
- 请求签名验证
- HTTPS传输
- 跨域控制

---

## 8. 性能优化

### 8.1 数据库优化
- 索引优化
- 查询优化
- 分页查询
- 读写分离
- 数据库连接池

### 8.2 缓存策略
- Redis缓存
- 热点数据缓存
- 查询结果缓存
- 缓存失效策略

### 8.3 前端优化
- 代码分割
- 懒加载
- 图片优化
- CDN加速
- Gzip压缩

---

## 9. 部署方案

### 9.1 开发环境
- 本地MySQL数据库
- 本地Redis
- 前后端分离开发

### 9.2 测试环境
- Docker容器部署
- 自动化测试
- 持续集成

### 9.3 生产环境
- 负载均衡
- 数据库主从复制
- Redis集群
- 日志收集
- 监控告警

---

## 10. 测试计划

### 10.1 单元测试
- Service层测试
- Repository层测试
- 工具类测试

### 10.2 集成测试
- API接口测试
- 数据库集成测试
- 第三方服务集成测试

### 10.3 E2E测试
- 用户登录流程
- 内容发布流程
- 工作流审批流程

### 10.4 性能测试
- 并发测试
- 压力测试
- 负载测试